(()=>{"use strict";const e={center:[55.7,20.6],zoom:4,controls:[]};async function t(){return await Promise.resolve(e)}const s=[{name:"WARSAW",coords:[52.237049,21.017532],description:"warsaw_desc",contact_info:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{name:"MOSCOW",coords:[55.75222,37.61556],description:"moscow_desc",contact_info:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{name:"MILAN",coords:[45.464664,9.18854],description:"milan_desc",contact_info:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{name:"LONDON",coords:[51.50853,-.076132],description:"london_desc",contact_info:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{name:"PARIS",coords:[48.864716,2.349014],description:"paris_desc",contact_info:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]}];async function a(){return await Promise.resolve(s)}class n{constructor(e="appStorage"){this.name=e,this._store={}}add(e,t,s,a=JSON.stringify,n=JSON.parse){this._store[e]={callback:t,ttl:s,serialize:a,deserialize:n}}async fetchStore(e=!1){const t=Object.keys(this._store).map((t=>{this.fetchStoredKey(t,e)}));await Promise.all(t)}async fetchStoredKey(e,t=!1){try{const s=JSON.parse(localStorage.getItem(`${this.name}_${e}_updatedAt`)||0),a=Date.now(),n=this._store[e];if(t||s+1e3*n.ttl<a){const t=await n.callback();localStorage.setItem(`${this.name}_${e}`,n.serialize(t)),localStorage.setItem(`${this.name}_${e}_updatedAt`,JSON.stringify(a))}}catch(t){console.error(`Can't fetch ${e} for storage`)}}async get(e){const t=this._store[e];localStorage.getItem(`${this.name}_${e}_updatedAt`)+1e3*t.ttl<Date.now()&&await this.fetchStoredKey(e,!0);const s=localStorage.getItem(`${this.name}_${e}`);return t.deserialize(s)}}let o;const l=[30,42],c=[-15,-40];const r="main-menu-select";class i{constructor(){this._select=document.getElementById(r),this._placemarks={}}compile(){this._select=this._select.addEventListener("change",this.getChangeCallback(this._placemarks))}addOption(e,t,s){const a=new Option(t.name,s),[n,o]=t.coords;this._placemarks[s]={shopPoint:e,clientX:n,clientY:o},this._select.appendChild(a)}getChangeCallback(e){return function(){const t=document.getElementById(r),{shopPoint:s,clientX:a,clientY:n}=e[t.value];s.events.fire("click")}}}class m{constructor(e){Object.entries(e).forEach((([e,t])=>{this[e]=new t}))}}class d{constructor(){this._list=[]}addValue(e){this._list.push(e)}getValues(){return this._list}clearValues(){this._list=[]}}let g;(async function(){const e=(g||(g={}),g),s=(o||(o=new n),o);s.add("mapData",t,600),s.add("shopData",a,300),await s.fetchStore();const r=new m({shopInfoNodes:d});e.store=s,e.inMemoryStore=r;const[p,h]=await Promise.all([e.store.get("mapData"),e.store.get("shopData")]);!function(e,t,s){ymaps.ready((function(){const s=new ymaps.Map("map",e),a=new i;t.forEach(((e,t)=>{const n=function(e){let t=0;const s=ymaps.templateLayoutFactory.createClass('<div class="slideshow-container">  <div class="mySlides fade">    <div class="numbertext">1 / 3</div>    <img src="assets/logo.svg" style="width:100%">    <div class="text">Caption Text</div>  </div>  <div class="mySlides fade">    <div class="numbertext">2 / 3</div>    <img src="assets/logo.svg" style="width:100%">    <div class="text">Caption Two</div>  </div>  <div class="mySlides fade">    <div class="numbertext">3 / 3</div>    <img src="assets/logo.svg" style="width:100%">    <div class="text">Caption Three</div>  </div>  <a id="prev-shop-img" class="prev">&#10094;</a>  <a id="next-shop-img" class="next">&#10095;</a></div><br><div style="text-align:center">  <span class="dot"></span>  <span class="dot"></span>  <span class="dot"></span></div>',{build:function(){s.superclass.build.call(this),$("#counter-button").bind("click",this.onCounterClick),$("#count").html(t);var e=1;function a(t){n(e+=t)}function n(t){var s,a=document.getElementsByClassName("mySlides"),n=document.getElementsByClassName("dot");for(t>a.length&&(e=1),t<1&&(e=a.length),s=0;s<a.length;s++)a[s].style.display="none";for(s=0;s<n.length;s++)n[s].className=n[s].className.replace(" active","");a[e-1].style.display="block",n[e-1].className+=" active"}n(e);const o=document.getElementsByClassName("dot");Array.from(o).forEach(((t,s)=>{t.addEventListener("click",(()=>{n(e=s+1)}))}));try{document.getElementById("prev-shop-img").addEventListener("click",(()=>{a(-1)})),document.getElementById("next-shop-img").addEventListener("click",(()=>{a(1)}))}catch(e){console.log(e,"hello2")}},clear:function(){$("#counter-button").unbind("click",this.onCounterClick),s.superclass.clear.call(this)},onCounterClick:function(e){console.log(e),$("#count").html(++t),5===t&&(alert("Good work."),t=0,$("#count").html(t))}});return new ymaps.Placemark(e.coords,{name:"Calculating"},{iconLayout:"default#image",iconImageHref:"assets/placemark.svg",iconImageSize:l,iconImageOffset:c,balloonContentLayout:s,balloonPanelMaxMapArea:0})}(e);s.geoObjects.add(n),a.addOption(n,e,t)})),a.compile()}))}(p,h)})().catch((e=>{console.error("Can`t init app")}))})();