(()=>{"use strict";const e={center:[55.7,20.6],zoom:4,controls:[]};async function a(){return e}const s=[{header:"WARSAW",coords:[52.237049,21.017532],description:"warsaw_desc",contactInfo:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{header:"MOSCOW",coords:[55.75222,37.61556],description:"moscow_desc",contactInfo:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{header:"MILAN",coords:[45.464664,9.18854],description:"milan_desc",contactInfo:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{header:"LONDON",coords:[51.50853,-.076132],description:"london_desc",contactInfo:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]},{header:"PARIS",coords:[48.864716,2.349014],description:"paris_desc",contactInfo:{phone:"+375 29 111 11 11",address:"City, Street, Building, Apartments"},imagesData:[{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"},{src:"assets/logo.png",alterName:"alter name"}]}];async function t(){return s}const n=[30,42],o=[-15,-40],r=(e,a)=>'<div class="slideshow-container">'+e.join("")+'<a id="prev-shop-img" class="prev">&#10094;</a><a id="next-shop-img" class="next">&#10095;</a>'+`<div style="text-align:center">${a.join("")}</div></div>`;function l(e,a,s){const t=[],l=[];return ymaps.ready((()=>{const c=new ymaps.Map("map",e);a.forEach(((e,a)=>{const s=function(e){const a=ymaps.templateLayoutFactory.createClass((e=>{const a=[];return a.push((({header:e})=>`<p class="header">${e}</p>`)(e)),a.push((({imagesData:e})=>{const a=e.map(((e,a,s)=>(({src:e,alterName:a},s,t)=>`<div class="mySlides fade"><div class="numbertext">${s+1} / ${t}</div><img src="${e}" alt="${a}" style="width:100%"><div class="text">${a}</div></div>`)(e,a,s.length))),s=e.reduce((e=>['<span class="dot"></span>',...e]),[]),t=r(a,s);return console.log(t),r(a,s)})(e)),a.push((({description:e})=>`<p class="description">${e}</p>`)(e)),a.push((({contactInfo:e})=>{const{address:a,phone:s}=e;return`<p class="address">${a}</p><p class="phone">${s}</p>`})(e)),a.join("")})(e),{build:function(){a.superclass.build.call(this),function(){let e=1;const a=a=>{s(e+=a)},s=a=>{const s=document.getElementsByClassName("mySlides"),t=document.getElementsByClassName("dot");a>s.length&&(e=1),a<1&&(e=s.length);for(let e=0;e<s.length;e++)s[e].style.display="none";for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(" active","");s[e-1].style.display="block",t[e-1].className+=" active"};s(e);const t=document.getElementsByClassName("dot");Array.from(t).forEach(((a,t)=>{a.addEventListener("click",(()=>{s(e=t+1)}))})),document.getElementById("prev-shop-img").addEventListener("click",(()=>{a(-1)})),document.getElementById("next-shop-img").addEventListener("click",(()=>{a(1)}))}()}});return new ymaps.Placemark(e.coords,{},{iconLayout:"default#image",iconImageHref:"assets/placemark.svg",iconImageSize:n,iconImageOffset:o,balloonContentLayout:a,balloonPanelMaxMapArea:0})}(e);t.push(s),c.geoObjects.add(s),l.push(new Option(e.header,a))})),s(t,l)})),t}const c="main-menu-select",i="Choose shop";(async function(){const[e,s]=await Promise.all([a(),t()]);l(e,s,((e,a)=>{const s=function(e,a){const s=document.getElementById(c);var t;return s.addEventListener("change",(t=e,()=>{const e=document.getElementById(c);t[e.value].events.fire("click")})),a.forEach((e=>{s.appendChild(e)})),s}(e,a);!function(e,a){const[s]=document.getElementsByClassName("clear");s.addEventListener("click",(()=>{a.filter((e=>e)).forEach((e=>{e.balloon.close()})),e.value=i}))}(s,e),((e,a)=>{a.forEach(((a,s)=>{a.balloon.events.add("open",(()=>{e.value=s})),a.balloon.events.add("close",(()=>{e.value=i}))}))})(s,e)}))})().catch((e=>{console.error("Can`t init app")}))})();